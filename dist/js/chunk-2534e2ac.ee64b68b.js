(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2534e2ac"],{"22da":function(e,t,a){"use strict";a.r(t);var l=a("7a23");const i=Object(l["withScopeId"])("data-v-17ae775d"),s=i((e,t,a,i,s,r)=>{const n=Object(l["resolveComponent"])("gauge");return Object(l["openBlock"])(),Object(l["createBlock"])("div",null,[Object(l["createVNode"])(n)])}),r=Object(l["withScopeId"])("data-v-3d8545ea");Object(l["pushScopeId"])("data-v-3d8545ea");const n={class:"headContainer"},o={style:{"margin-left":"3px"}},h={style:{"margin-left":"3px"}};Object(l["popScopeId"])();const u=r((e,t,a,i,s,r)=>{const u=Object(l["resolveComponent"])("dv-charts");return Object(l["openBlock"])(),Object(l["createBlock"])("div",null,[Object(l["createVNode"])("div",n,[(Object(l["openBlock"])(),Object(l["createBlock"])(l["Fragment"],null,Object(l["renderList"])(["周","月","年"],(e,t)=>Object(l["createVNode"])("div",{class:["head",{headNotActive:!s.isActive[s.timeClass[t]],headActive:s.isActive[s.timeClass[t]]}],onClick:e=>r.changeTime(t)},Object(l["toDisplayString"])(e),11,["onClick"])),64))]),Object(l["createVNode"])("div",o,"总支出："+Object(l["toDisplayString"])(s.all.toFixed(2)),1),Object(l["createVNode"])("div",h," 平均值："+Object(l["toDisplayString"])((s.all/s.upDetail.xAxis.data.length).toFixed(2)),1),Object(l["createVNode"])(u,{option:s.upDetail,style:{width:"100%",height:"280px"}},null,8,["option"]),Object(l["createVNode"])(u,{option:s.sortDetail,style:{width:"100%",height:"330px"}},null,8,["option"])])});var d=a("5618"),c={name:"gauge",mounted(){const e=this;Object(d["a"])("/bill/allBills",t=>{e.list=t.data,e.drawWeek(e.list,e.upDetailWeek,e.sortDetailWeek),e.drawMonth(e.list,e.upDetailMonth,e.sortDetailMonth),e.drawYear(e.list,e.upDetailYear,e.sortDetailYear),e.upDetail=e.upDetailWeek,e.sortDetail=e.sortDetailWeek,e.all=e.allWeek,e.refresh()})},data(){return{all:0,allWeek:0,allMonth:0,allYear:0,list:[],isActive:{week:!0,month:!1,year:!1},timeClass:["week","month","year"],upDetail:{title:{},xAxis:{data:["周一","周二","周三","周四","周五","周六","周日"],axisLabel:{show:!1}},yAxis:{data:"value"},series:[{data:[1200,2230,1900,2100,3500,4200,3985],type:"line",linePoint:{radius:4},color:"#a9913c",label:{show:!1}}]},sortDetail:{series:[{type:"pie",data:[{name:"可口可乐",value:93},{name:"百事可乐",value:32},{name:"哇哈哈",value:65},{name:"康师傅",value:44},{name:"统一",value:52}],insideLabel:{show:!1}}]},upDetailWeek:{title:{},xAxis:{data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{data:"value"},series:[{data:[1200,2230,1900,2100,3500,4200,3985],type:"line",linePoint:{radius:4},color:"#a9913c",label:{show:!1,color:"#000"}}]},upDetailMonth:{color:["#fff"],title:{},xAxis:{data:["周一","周二","周三","周四","周五","周六","周日"],axisLabel:{show:!1}},yAxis:{data:"value"},series:[{data:[1200,2230,1900,2100,3500,4200,3985],type:"line",linePoint:{radius:4},color:"#000",label:{show:!1,color:"#000"}}]},upDetailYear:{title:{},xAxis:{data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{data:"value"},series:[{data:[1200,2230,1900,2100,3500,4200,3985],type:"line",linePoint:{radius:4},color:"#a9913c",label:{show:!1,color:"#000"}}]},sortDetailWeek:{color:["#37a2da","#FFFF00","#e062ae","#9400D3","#00FF00"],series:[{type:"pie",data:[{name:"可口可乐",value:93},{name:"百事可乐",value:32},{name:"哇哈哈",value:65},{name:"康师傅",value:44},{name:"统一",value:52}],radius:["40%","50%"],insideLabel:{show:!1}}]},sortDetailMonth:{color:["#37a2da","#FFFF00","#e062ae","#9400D3","#00FF00"],series:[{type:"pie",data:[{name:"可口可乐",value:93},{name:"百事可乐",value:32},{name:"哇哈哈",value:65},{name:"康师傅",value:44},{name:"统一",value:52}],radius:["40%","50%"],insideLabel:{show:!1}}]},sortDetailYear:{color:["#37a2da","#FFFF00","#e062ae","#9400D3","#00FF00"],series:[{type:"pie",data:[{name:"可口可乐",value:93},{name:"百事可乐",value:32},{name:"哇哈哈",value:65},{name:"康师傅",value:44},{name:"统一",value:52}],radius:["40%","50%"],insideLabel:{show:!1}}],outsideLabel:{labelLineEndLength:20}}}},methods:{sortFilter(e){let t=e.series[0].data;if(t=t.sort(this.compare("value")),t.length>5){for(let e=t.length-1;e>=4;e--)t[3].value+=t[e].value,t.pop();t[3]["name"]="其它"}return t},compare(e){return function(t,a){var l=t[e],i=a[e];return i-l}},changeTime(e){switch(this.isActive[this.timeClass[0]]=!1,this.isActive[this.timeClass[1]]=!1,this.isActive[this.timeClass[2]]=!1,this.isActive[this.timeClass[e]]=!0,e){case 0:this.upDetail=this.upDetailWeek,this.sortDetail=this.sortDetailWeek,this.all=this.allWeek,this.refresh();break;case 1:this.upDetail=this.upDetailMonth,this.sortDetail=this.sortDetailMonth,this.all=this.allMonth,this.refresh();break;case 2:this.upDetail=this.upDetailYear,this.sortDetail=this.sortDetailYear,this.all=this.allYear,this.refresh();break}},refresh(){this.upDetail={...this.upDetail},this.sortDetail={...this.sortDetail}},clear(e,t){this.all=0,e.xAxis.data=[],e.series[0]["data"]=[],t.series[0]["data"]=[]},drawYear(e,t,a){this.clear(t,a);let l={},i=new Date;for(let r=0;r<12;r++)t.xAxis.data.push(r+1),t.series[0]["data"].push(0);let s=new RegExp("-","g");for(let r=0;r<e.length;r++){e[r].bill.date=e[r].bill.date.replace(s,"/");let a=new Date(e[r].bill.date);if(this.isSameYear(e[r].bill.date,i)){let i=a.getMonth();t.series[0]["data"][parseInt(i)]+=e[r].bill.amount,this.allYear+=e[r].bill.amount;for(let t=0;t<e[r].tags.length;t++)l.hasOwnProperty(e[r].tags[t].name)?l[e[r].tags[t].name]+=e[r].bill.amount:l[e[r].tags[t].name]=e[r].bill.amount}}for(let r=0;r<Object.keys(l).length;r++)a.series[0]["data"].push({name:Object.keys(l)[r],value:l[Object.keys(l)[r]]}),a.series[0].data=this.sortFilter(a),t={...t},a={...a}},drawWeek(e,t,a){this.clear(t,a);let l=[],i={},s=new Date,r=s.getDay(),n=Date.parse(new Date(s))/1e3;for(let h=0;h<7;h++){let e=new Date(1e3*(n+86400*(-(0===r?7:r)+h+1)));t.xAxis.data.push([e.getMonth()+1+"/"+e.getDate()]),t.series[0]["data"].push(0),l.push(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate())}let o=new RegExp("-","g");for(let h=0;h<e.length;h++){e[h].bill.date=e[h].bill.date.replace(o,"/");let a=new Date(e[h].bill.date);if(this.isThisWeek(e[h].bill.date))for(let s=0;s<7;s++)if(this.isSameDay(a,l[s])){t.series[0]["data"][s]+=e[h].bill["amount"],this.allWeek+=e[h].bill.amount;for(let t=0;t<e[h].tags.length;t++)i.hasOwnProperty(e[h].tags[t].name)?i[e[h].tags[t]["name"]]+=e[h].bill["amount"]:i[e[h].tags[t]["name"]]=e[h].bill["amount"]}}for(let h=0;h<Object.keys(i).length;h++)a.series[0]["data"].push({name:Object.keys(i)[h],value:i[Object.keys(i)[h]]}),a.series[0].data=this.sortFilter(a),t={...t},a={...a}},drawMonth(e,t,a){this.clear(t,a);let l=[],i={},s=new Date,r=s.getMonth()+1,n=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();for(let h=0;h<n;h++)t.xAxis.data.push(h),l.push(s.getFullYear()+"/"+r+"/"+h),t.series[0]["data"].push(0);let o=new RegExp("-","g");for(let h=0;h<e.length;h++){e[h].bill.date=e[h].bill.date.replace(o,"/");let a=new Date(e[h].bill.date);if(this.isSameMonth(e[h].bill.date,s))for(let s=0;s<n;s++)if(this.isSameDay(a,l[s])){t.series[0]["data"][s]+=e[h].bill.amount,this.allMonth+=e[h].bill.amount;for(let t=0;t<e[h].tags.length;t++)i.hasOwnProperty(e[h].tags[t].name)?i[e[h].tags[t]["name"]]+=e[h].bill["amount"]:i[e[h].tags[t]["name"]]=e[h].bill["amount"]}}for(let h=0;h<Object.keys(i).length;h++)a.series[0]["data"].push({name:Object.keys(i)[h],value:i[Object.keys(i)[h]]});a.series[0].data=this.sortFilter(a)},isSameMonth(e,t){e=new Date(e),t=new Date(t);let a=e.getFullYear()+"/"+(e.getMonth()+1),l=t.getFullYear()+"/"+(t.getMonth()+1);return l===a},isSameYear(e,t){e=new Date(e),t=new Date(t);let a=e.getFullYear(),l=t.getFullYear();return l===a},isSameDay(e,t){e=new Date(e),t=new Date(t);let a=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),l=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();return l===a},isThisWeek(e){let t=new Date;e=new Date(e);let a=0===t.getDay()?7:t.getDay(),l=Date.parse(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()),i=Date.parse(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate());return l/i/864e5<a}}};a("a4e9");c.render=u,c.__scopeId="data-v-3d8545ea";var p=c,b=(a("4f20"),{name:"analysis",methods:{},components:{Gauge:p}});a("97ba");b.render=s,b.__scopeId="data-v-17ae775d";t["default"]=b},"399d":function(e,t,a){},"76b3":function(e,t,a){},"97ba":function(e,t,a){"use strict";a("399d")},a4e9:function(e,t,a){"use strict";a("76b3")}}]);
//# sourceMappingURL=chunk-2534e2ac.ee64b68b.js.map